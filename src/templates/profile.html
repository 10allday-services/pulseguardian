{% extends 'base.html' %}

        
{% block body %}
{% set inspected_users = users if user.admin else [user] %}

{% for user in inspected_users %}
    <h2 class="text-primary">
        <small>Profile:</small> {{user.username}}
    </h2>

    <div>
        <h3>Queues</h3>

        {% if user.queues %}
        <ul class="list-group">
            {% for queue in user.queues %}
            <li class="list-group-item">
                <h4>{{queue.name}} <small>{{queue.size}} messages</small></h4> 
            </li>

            <div class="progress">
            {% set fill_perc = 100 * queue.size / config.del_queue_size %}
            {% set bar_class = 'progress-bar-danger' if queue.size > config.warn_queue_size else '' %}
            <div class="progress-bar {{bar_class}}" role="progressbar" aria-valuenow="{{queue.size}}" aria-valuemin="0" aria-valuemax="{{config.del_queue_size}}"
                   style="width: {{fill_perc}}%;">
                {{fill_perc}}%
              </div>
            </div>
            {% endfor %}
        </ul>
        {% else %}
        <p>
            No queues for now!
        </p>
        {% endif %}
    </div>
{% endfor %}


{% endblock %}
